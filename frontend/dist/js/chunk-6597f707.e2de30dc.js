(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6597f707"],{"021e":function(t,s,e){},"235a":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"agent-list-container"},[s("h1",{staticClass:"page-title"},[t._v("agent列表")]),t.loading?s("div",{staticClass:"loading-container"},[s("el-skeleton",{attrs:{rows:4,animated:""}})],1):0===t.agents.length?s("div",{staticClass:"empty-state"},[s("i",{staticClass:"el-icon-warning-outline"}),s("p",[t._v("没有找到agent")])]):s("div",{staticClass:"agent-grid"},t._l(t.mainAgents,(function(e){return s("agent-card",{key:e.id,attrs:{agent:e,"sub-agents":t.getSubAgents(e.id)}})})),1)])},n=[],i=e("7424"),r=function(){var t=this,s=t._self._c;return s("div",{staticClass:"agent-card",class:{offline:"offline"===t.agent.status}},[s("div",{staticClass:"agent-header"},[s("div",{staticClass:"agent-title"},[s("h3",[t._v(t._s(t.agent.name))]),s("el-tag",{attrs:{size:"small",type:t.getStatusType(t.agent.status)}},[t._v(t._s(t.getStatusText(t.agent.status)))])],1),s("div",{staticClass:"agent-meta"},[s("span",{staticClass:"agent-id"},[t._v("ID: "),s("span",{staticClass:"info-value"},[t._v(t._s(t.agent.id))])]),s("span",{staticClass:"agent-type"},[t._v("类型: "),s("span",{staticClass:"info-value"},[t._v(t._s("main"===t.agent.type?"主agent":"子agent"))])])])]),s("div",{staticClass:"agent-time-info"},[s("div",{staticClass:"time-item"},[s("i",{staticClass:"el-icon-time"}),s("span",[t._v("创建时间: "),s("span",{staticClass:"info-value"},[t._v(t._s(t.formatDateTime(t.agent.created_time)))])])]),s("div",{staticClass:"time-item"},[s("i",{staticClass:"el-icon-refresh"}),s("span",[t._v("最近心跳: "),s("span",{staticClass:"info-value"},[t._v(t._s(t.formatDateTime(t.agent.last_heartbeat_time)))])])])]),s("div",{staticClass:"resource-section"},[s("div",{staticClass:"resource-item"},[s("div",{staticClass:"resource-title"},[t._v("CPU")]),s("div",{staticClass:"resource-content"},[s("span",{staticClass:"cores"},[s("span",{staticClass:"info-value"},[t._v(t._s(t.agent.cpu_cores||0))]),t._v(" 核心")]),s("span",{staticClass:"usage"},[s("span",{staticClass:"info-value"},[t._v(t._s(Math.round(t.agent.cpu_usage||0))+"%")])])])]),s("div",{staticClass:"resource-item"},[s("div",{staticClass:"resource-title"},[t._v("内存")]),s("resource-bar",{attrs:{used:t.agent.memory_used||0,total:t.agent.memory_total||1,"show-text":!0,format:"bytes"}})],1)]),t.parsedGpuInfo&&t.parsedGpuInfo.length>0?s("div",{staticClass:"gpu-section"},[s("h4",[t._v("GPU 资源")]),s("div",{staticClass:"gpu-grid"},t._l(t.parsedGpuInfo,(function(t,e){return s("gpu-card",{key:e,attrs:{gpu:t}})})),1)]):t._e(),s("div",{staticClass:"sub-agents-section"},[s("h4",[t._v("子agent "+t._s(t.subAgents&&t.subAgents.length>0?`(${t.subAgents.length})`:""))]),t.subAgents&&t.subAgents.length>0?s("div",{staticClass:"sub-agents-grid"},t._l(t.subAgents,(function(t){return s("sub-agent-card",{key:t.id,attrs:{agent:t}})})),1):s("div",{staticClass:"no-sub-agents"},[s("i",{staticClass:"el-icon-info"}),s("p",[t._v("暂无子agent")])])])])},o=[],l=function(){var t=this,s=t._self._c;return s("div",{staticClass:"resource-bar",class:{small:"small"===t.size}},[s("div",{staticClass:"progress-container",class:{"empty-progress":0===t.percentage}},[s("el-progress",{attrs:{percentage:t.percentage,"stroke-width":"small"===t.size?10:14,color:t.getColorByPercentage(t.percentage),"show-text":!1}})],1),t.showText?s("div",{staticClass:"resource-text"},[s("span",{staticClass:"info-value"},[t._v(t._s(t.formatValue(t.used)))]),t._v(" / "),s("span",{staticClass:"info-value"},[t._v(t._s(t.formatValue(t.total)))])]):t._e()])},c=[],u={name:"ResourceBar",props:{used:{type:Number,required:!0},total:{type:Number,required:!0,validator:t=>t>0},showText:{type:Boolean,default:!0},format:{type:String,default:"percentage",validator:t=>["percentage","bytes"].includes(t)},size:{type:String,default:"normal",validator:t=>["small","normal"].includes(t)}},computed:{percentage(){return Math.min(Math.round(this.used/this.total*100),100)}},methods:{getColorByPercentage(t){return t<60?"#67c23a":t<80?"#e6a23c":"#f56c6c"},formatValue(t){return"percentage"===this.format?t+"%":"bytes"===this.format?this.formatBytes(t):t},formatBytes(t){if(0===t)return"0 B";const s=["B","KB","MB","GB","TB"],e=Math.floor(Math.log(t)/Math.log(1024)),a=Math.min(e,s.length-1);return`${(t/Math.pow(1024,a)).toFixed(2)} ${s[a]}`}}},g=u,d=(e("31fd"),e("2877")),p=Object(d["a"])(g,l,c,!1,null,"4ea45a99",null),f=p.exports,v=function(){var t=this,s=t._self._c;return s("div",{staticClass:"gpu-card",class:{small:"small"===t.size}},[s("div",{staticClass:"gpu-header"},[s("div",{staticClass:"gpu-title"},[s("h5",[t._v("GPU "),s("span",{staticClass:"info-value"},[t._v(t._s(t.gpu.gpu_id))])]),s("el-tag",{attrs:{size:"mini",type:t.gpu.is_available?"success":"danger"}},[t._v(" "+t._s(t.gpu.is_available?"可用":"使用中")+" ")])],1)]),s("div",{staticClass:"gpu-usage"},[s("span",{staticClass:"usage-label"},[t._v("使用率:")]),s("span",{staticClass:"usage-value"},[s("span",{staticClass:"info-value"},[t._v(t._s(Math.round(t.gpu.usage||0))+"%")])])]),s("div",{staticClass:"memory-section"},[s("resource-bar",{attrs:{used:t.gpu.memory_used||0,total:t.gpu.memory_total||1,"show-text":!0,format:"bytes",size:t.size}})],1)])},_=[],m={name:"GpuCard",components:{ResourceBar:f},props:{gpu:{type:Object,required:!0},size:{type:String,default:"normal",validator:t=>["small","normal"].includes(t)}}},h=m,C=(e("3efd"),Object(d["a"])(h,v,_,!1,null,"1f712db8",null)),y=C.exports,b=function(){var t=this,s=t._self._c;return s("div",{staticClass:"sub-agent-card",class:{offline:"offline"===t.agent.status}},[s("div",{staticClass:"sub-agent-header"},[s("div",{staticClass:"sub-agent-title"},[s("h4",[t._v(t._s(t.agent.name))]),s("el-tag",{attrs:{size:"mini",type:t.getStatusType(t.agent.status)}},[t._v(t._s(t.getStatusText(t.agent.status)))])],1),s("div",{staticClass:"sub-agent-meta"},[s("span",{staticClass:"sub-agent-id"},[t._v("ID: "),s("span",{staticClass:"info-value"},[t._v(t._s(t.truncateId(t.agent.id)))])]),t.agent.task_id?s("span",{staticClass:"task-id"},[t._v("任务: "),s("span",{staticClass:"info-value"},[t._v(t._s(t.truncateId(t.agent.task_id)))])]):t._e()])]),s("div",{staticClass:"sub-agent-time-info"},[s("div",{staticClass:"time-item"},[s("i",{staticClass:"el-icon-time"}),s("span",[t._v("创建时间: "),s("span",{staticClass:"info-value"},[t._v(t._s(t.formatDateTime(t.agent.created_time)))])])]),s("div",{staticClass:"time-item"},[s("i",{staticClass:"el-icon-refresh"}),s("span",[t._v("最近心跳: "),s("span",{staticClass:"info-value"},[t._v(t._s(t.formatDateTime(t.agent.last_heartbeat_time)))])])])]),s("div",{staticClass:"resource-section"},[s("div",{staticClass:"resource-item"},[s("div",{staticClass:"resource-content cpu-info"},[s("span",{staticClass:"cores"},[s("span",{staticClass:"info-value"},[t._v(t._s(t.agent.cpu_cores||0))]),t._v(" 核心")]),s("span",{staticClass:"usage"},[s("span",{staticClass:"info-value"},[t._v(t._s(Math.round(t.agent.cpu_usage||0))+"%")])])])]),s("div",{staticClass:"resource-item"},[s("resource-bar",{attrs:{used:t.agent.memory_used||0,total:t.agent.memory_total||1,"show-text":!0,format:"bytes",size:"small"}})],1)]),t.parsedGpuInfo&&t.parsedGpuInfo.length>0?s("div",{staticClass:"gpu-section"},[s("div",{staticClass:"gpu-grid"},t._l(t.parsedGpuInfo,(function(t,e){return s("gpu-card",{key:e,attrs:{gpu:t,size:"small"}})})),1)]):t._e()])},A=[],I={name:"SubAgentCard",components:{ResourceBar:f,GpuCard:y},props:{agent:{type:Object,required:!0}},computed:{parsedGpuInfo(){try{return Array.isArray(this.agent.gpu_info)?this.agent.gpu_info:"string"===typeof this.agent.gpu_info&&this.agent.gpu_info.trim()?JSON.parse(this.agent.gpu_info):[]}catch(t){return console.error("Error parsing GPU info:",t),[]}}},methods:{truncateId(t){return t?t.length>8?t.substring(0,8)+"...":t:"N/A"},formatDateTime(t){if(!t)return"N/A";try{const s=new Date(t),e=new Date,a=e-s,n=Math.floor(a/1e3),i=Math.floor(n/60),r=Math.floor(i/60),o=Math.floor(r/24);return n<60?"刚刚":i<60?i+" 分钟前":r<24?r+" 小时前":o<30?o+" 天前":s.toISOString().split("T")[0]}catch(s){return"Invalid date"}},getStatusType(t){const s={online:"success",offline:"info",end:"danger"};return s[t]||"info"},getStatusText(t){const s={online:"在线",offline:"离线",end:"已结束"};return s[t]||t}}},w=I,S=(e("6fd9"),Object(d["a"])(w,b,A,!1,null,"4ffbb889",null)),M=S.exports,T={name:"AgentCard",components:{ResourceBar:f,GpuCard:y,SubAgentCard:M},props:{agent:{type:Object,required:!0},subAgents:{type:Array,default:()=>[]}},computed:{parsedGpuInfo(){try{return Array.isArray(this.agent.gpu_info)?this.agent.gpu_info:"string"===typeof this.agent.gpu_info&&this.agent.gpu_info.trim()?JSON.parse(this.agent.gpu_info):[]}catch(t){return console.error("Error parsing GPU info:",t),[]}}},methods:{formatDateTime(t){if(!t)return"N/A";try{const s=new Date(t),e=new Date,a=e-s,n=Math.floor(a/1e3),i=Math.floor(n/60),r=Math.floor(i/60),o=Math.floor(r/24);return n<60?"刚刚":i<60?i+" 分钟前":r<24?r+" 小时前":o<30?o+" 天前":s.toISOString().split("T")[0]}catch(s){return"Invalid date"}},getStatusType(t){const s={online:"success",offline:"info",end:"danger"};return s[t]||"info"},getStatusText(t){const s={online:"在线",offline:"离线",end:"已结束"};return s[t]||t}}},x=T,G=(e("8566"),Object(d["a"])(x,r,o,!1,null,"6cb30848",null)),B=G.exports,D={name:"AgentList",components:{AgentCard:B},data(){return{agents:[],loading:!0,refreshInterval:null}},computed:{mainAgents(){return this.agents.filter(t=>"main"===t.type)}},created(){this.fetchAgents(),this.refreshInterval=setInterval(()=>{this.fetchAgents()},1e4)},beforeDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{async fetchAgents(){try{this.loading=!0;const t=await i["a"].getAgents();this.agents=t}catch(t){console.error("Failed to fetch agents:",t),this.$message.error("Failed to load agents")}finally{this.loading=!1}},getSubAgents(t){return this.agents.filter(s=>"sub"===s.type&&s.main_agent_id===t)}}},k=D,z=(e("2517"),Object(d["a"])(k,a,n,!1,null,"8715ec1e",null));s["default"]=z.exports},2517:function(t,s,e){"use strict";e("d13d")},"31fd":function(t,s,e){"use strict";e("021e")},"3efd":function(t,s,e){"use strict";e("dced")},"6fd9":function(t,s,e){"use strict";e("82fe")},"82fe":function(t,s,e){},8566:function(t,s,e){"use strict";e("ba68")},ba68:function(t,s,e){},d13d:function(t,s,e){},dced:function(t,s,e){}}]);
//# sourceMappingURL=chunk-6597f707.e2de30dc.js.map
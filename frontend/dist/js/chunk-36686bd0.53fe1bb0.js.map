{"version":3,"sources":["webpack:///./src/views/Tasks/TaskList.vue?71fe","webpack:///./src/views/Tasks/TaskList.vue","webpack:///src/views/Tasks/TaskList.vue","webpack:///./src/views/Tasks/TaskList.vue?e48c","webpack:///./src/views/Tasks/TaskList.vue?ef5f"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","statusOptions","on","applyFilters","model","value","filterStatus","callback","$$v","expression","templateTypeOptions","filterTemplateType","debounceSearch","filterName","clearFilters","tasks","fields","loading","scopedSlots","_u","key","fn","data","class","_s","getStatusText","getPriorityText","formatDate","$event","viewTaskDetail","item","id","includes","status","confirmCancel","proxy","pagination","total","perPage","changePage","currentPage","cancelTask","selectedTask","name","error","clearError","_e","staticRenderFns","label","sortable","debounceTimer","text","computed","mapState","state","mapGetters","methods","mapActions","dateStr","moment","format","statusMap","priority","priorityMap","taskId","$router","push","task","$bvModal","show","$bvToast","toast","title","variant","solid","page","setPage","setFilters","template_type","clearTimeout","setTimeout","initTemplateTypeOptions","templateTypes","length","map","type","fetchTemplates","fetchTasks","console","watch","handler","immediate","component"],"mappings":"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","file":"js/chunk-36686bd0.53fe1bb0.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskList.vue?vue&type=style&index=0&id=aca60c7e&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"task-list\"},[_c('div',{staticClass:\"card mb-4\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title\"},[_vm._v(\"筛选条件\")]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-3\"},[_c('b-form-group',{attrs:{\"label\":\"状态\"}},[_c('b-form-select',{attrs:{\"options\":_vm.statusOptions},on:{\"change\":_vm.applyFilters},model:{value:(_vm.filterStatus),callback:function ($$v) {_vm.filterStatus=$$v},expression:\"filterStatus\"}})],1)],1),_c('div',{staticClass:\"col-md-3\"},[_c('b-form-group',{attrs:{\"label\":\"模板类型\"}},[_c('b-form-select',{attrs:{\"options\":_vm.templateTypeOptions},on:{\"change\":_vm.applyFilters},model:{value:(_vm.filterTemplateType),callback:function ($$v) {_vm.filterTemplateType=$$v},expression:\"filterTemplateType\"}})],1)],1),_c('div',{staticClass:\"col-md-4\"},[_c('b-form-group',{attrs:{\"label\":\"名称关键词\"}},[_c('b-form-input',{attrs:{\"placeholder\":\"输入任务名称关键词\"},on:{\"input\":_vm.debounceSearch},model:{value:(_vm.filterName),callback:function ($$v) {_vm.filterName=$$v},expression:\"filterName\"}})],1)],1),_c('div',{staticClass:\"col-md-2 d-flex align-items-end\"},[_c('b-button',{staticClass:\"w-100\",attrs:{\"variant\":\"outline-secondary\",\"size\":\"sm\"},on:{\"click\":_vm.clearFilters}},[_c('i',{staticClass:\"bi bi-x-circle mr-1\"}),_vm._v(\"清空筛选 \")])],1)])])]),_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body p-0\"},[_c('b-table',{staticClass:\"mb-0\",attrs:{\"striped\":\"\",\"hover\":\"\",\"items\":_vm.tasks,\"fields\":_vm.fields,\"busy\":_vm.loading,\"show-empty\":\"\",\"empty-text\":\"没有找到任务，请调整筛选条件\",\"responsive\":\"\"},scopedSlots:_vm._u([{key:\"cell(status)\",fn:function(data){return [_c('b-badge',{class:'status-' + data.value},[_vm._v(_vm._s(_vm.getStatusText(data.value)))])]}},{key:\"cell(priority)\",fn:function(data){return [_c('b-badge',{attrs:{\"variant\":\"secondary\"}},[_vm._v(_vm._s(_vm.getPriorityText(data.value)))])]}},{key:\"cell(created_time)\",fn:function(data){return [_vm._v(\" \"+_vm._s(_vm.formatDate(data.value))+\" \")]}},{key:\"cell(actions)\",fn:function(data){return [_c('b-button-group',{attrs:{\"size\":\"sm\"}},[_c('b-button',{attrs:{\"variant\":\"outline-primary\"},on:{\"click\":function($event){return _vm.viewTaskDetail(data.item.id)}}},[_c('i',{staticClass:\"bi bi-eye\"})]),_c('b-button',{attrs:{\"variant\":\"outline-danger\",\"disabled\":!['waiting', 'blocked', 'running'].includes(data.item.status)},on:{\"click\":function($event){return _vm.confirmCancel(data.item)}}},[_c('i',{staticClass:\"bi bi-x-circle\"})])],1)]}},{key:\"table-busy\",fn:function(){return [_c('div',{staticClass:\"text-center my-2\"},[_c('b-spinner',{staticClass:\"align-middle\"}),_c('strong',[_vm._v(\" 加载中...\")])],1)]},proxy:true}])})],1),_c('div',{staticClass:\"card-footer d-flex justify-content-between align-items-center\"},[_c('small',{staticClass:\"text-muted\"},[_vm._v(\"共 \"+_vm._s(_vm.pagination.total)+\" 条记录\")]),_c('b-pagination',{staticClass:\"my-0\",attrs:{\"total-rows\":_vm.pagination.total,\"per-page\":_vm.pagination.perPage,\"limit\":5,\"align\":\"right\",\"size\":\"sm\"},on:{\"change\":_vm.changePage},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}})],1)]),_c('b-modal',{attrs:{\"id\":\"cancel-modal\",\"title\":\"取消任务\",\"ok-title\":\"确认取消\",\"ok-variant\":\"danger\",\"cancel-title\":\"返回\"},on:{\"ok\":_vm.cancelTask}},[_c('p',[_vm._v(\"您确认要取消任务 \"),_c('strong',[_vm._v(_vm._s(_vm.selectedTask ? _vm.selectedTask.name : ''))]),_vm._v(\" 吗？\")]),_c('p',{staticClass:\"text-danger\"},[_vm._v(\"此操作不可撤销！已取消的任务将不会被执行。\")])]),(_vm.error)?_c('b-alert',{staticClass:\"mt-3\",attrs:{\"variant\":\"danger\",\"dismissible\":\"\",\"show\":\"\"},on:{\"dismissed\":_vm.clearError}},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"task-list\">\n    <!-- 任务过滤器 -->\n    <div class=\"card mb-4\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">筛选条件</h5>\n        <div class=\"row\">\n          <div class=\"col-md-3\">\n            <b-form-group label=\"状态\">\n              <b-form-select v-model=\"filterStatus\" :options=\"statusOptions\" @change=\"applyFilters\"></b-form-select>\n            </b-form-group>\n          </div>\n          <div class=\"col-md-3\">\n            <b-form-group label=\"模板类型\">\n              <b-form-select v-model=\"filterTemplateType\" :options=\"templateTypeOptions\" @change=\"applyFilters\"></b-form-select>\n            </b-form-group>\n          </div>\n          <div class=\"col-md-4\">\n            <b-form-group label=\"名称关键词\">\n              <b-form-input v-model=\"filterName\" placeholder=\"输入任务名称关键词\" @input=\"debounceSearch\"></b-form-input>\n            </b-form-group>\n          </div>\n          <div class=\"col-md-2 d-flex align-items-end\">\n            <b-button variant=\"outline-secondary\" size=\"sm\" @click=\"clearFilters\" class=\"w-100\">\n              <i class=\"bi bi-x-circle mr-1\"></i>清空筛选\n            </b-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 任务表格 -->\n    <div class=\"card\">\n      <div class=\"card-body p-0\">\n        <b-table \n          striped \n          hover \n          :items=\"tasks\" \n          :fields=\"fields\"\n          :busy=\"loading\"\n          show-empty\n          empty-text=\"没有找到任务，请调整筛选条件\"\n          responsive\n          class=\"mb-0\"\n        >\n          <!-- 状态列 -->\n          <template #cell(status)=\"data\">\n            <b-badge :class=\"'status-' + data.value\">{{ getStatusText(data.value) }}</b-badge>\n          </template>\n          \n          <!-- 优先级列 -->\n          <template #cell(priority)=\"data\">\n            <b-badge variant=\"secondary\">{{ getPriorityText(data.value) }}</b-badge>\n          </template>\n          \n          <!-- 创建时间列 -->\n          <template #cell(created_time)=\"data\">\n            {{ formatDate(data.value) }}\n          </template>\n          \n          <!-- 操作列 -->\n          <template #cell(actions)=\"data\">\n            <b-button-group size=\"sm\">\n              <b-button variant=\"outline-primary\" @click=\"viewTaskDetail(data.item.id)\">\n                <i class=\"bi bi-eye\"></i>\n              </b-button>\n              <b-button \n                variant=\"outline-danger\" \n                @click=\"confirmCancel(data.item)\" \n                :disabled=\"!['waiting', 'blocked', 'running'].includes(data.item.status)\"\n              >\n                <i class=\"bi bi-x-circle\"></i>\n              </b-button>\n            </b-button-group>\n          </template>\n          \n          <!-- 加载中提示 -->\n          <template #table-busy>\n            <div class=\"text-center my-2\">\n              <b-spinner class=\"align-middle\"></b-spinner>\n              <strong> 加载中...</strong>\n            </div>\n          </template>\n        </b-table>\n      </div>\n      \n      <!-- 分页 -->\n      <div class=\"card-footer d-flex justify-content-between align-items-center\">\n        <small class=\"text-muted\">共 {{ pagination.total }} 条记录</small>\n        <b-pagination\n          v-model=\"currentPage\"\n          :total-rows=\"pagination.total\"\n          :per-page=\"pagination.perPage\"\n          :limit=\"5\"\n          align=\"right\"\n          size=\"sm\"\n          class=\"my-0\"\n          @change=\"changePage\"\n        ></b-pagination>\n      </div>\n    </div>\n    \n    <!-- 取消任务确认框 -->\n    <b-modal \n      id=\"cancel-modal\" \n      title=\"取消任务\" \n      ok-title=\"确认取消\" \n      ok-variant=\"danger\"\n      cancel-title=\"返回\"\n      @ok=\"cancelTask\"\n    >\n      <p>您确认要取消任务 <strong>{{ selectedTask ? selectedTask.name : '' }}</strong> 吗？</p>\n      <p class=\"text-danger\">此操作不可撤销！已取消的任务将不会被执行。</p>\n    </b-modal>\n    \n    <!-- 全局错误提示 -->\n    <b-alert \n      v-if=\"error\" \n      variant=\"danger\" \n      dismissible \n      show \n      class=\"mt-3\"\n      @dismissed=\"clearError\"\n    >\n      {{ error }}\n    </b-alert>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters, mapActions } from 'vuex'\nimport moment from 'moment'\n\nexport default {\n  name: 'TaskList',\n  \n  data() {\n    return {\n      fields: [\n        { key: 'id', label: 'ID', sortable: true },\n        { key: 'name', label: '任务名称', sortable: true },\n        { key: 'template_type', label: '模板类型', sortable: true },\n        { key: 'priority', label: '优先级', sortable: true },\n        { key: 'status', label: '状态', sortable: true },\n        { key: 'created_time', label: '创建时间', sortable: true },\n        { key: 'actions', label: '操作' }\n      ],\n      selectedTask: null,\n      currentPage: 1,\n      debounceTimer: null,\n      filterStatus: '',\n      filterName: '',\n      filterTemplateType: '',\n      statusOptions: [\n        { value: '', text: '全部状态' },\n        { value: 'waiting', text: '等待中' },\n        { value: 'blocked', text: '被阻塞' },\n        { value: 'running', text: '运行中' },\n        { value: 'completed', text: '已完成' },\n        { value: 'failed', text: '失败' },\n        { value: 'canceled', text: '已取消' }\n      ],\n      templateTypeOptions: [\n        { value: '', text: '全部类型' }\n        // 其他模板类型将在created生命周期中从后端获取\n      ]\n    }\n  },\n  \n  computed: {\n    ...mapState({\n      tasks: state => state.tasks.tasks,\n      pagination: state => state.tasks.pagination,\n      loading: state => state.loading,\n      error: state => state.error\n    }),\n    ...mapGetters('templates', ['templateTypes'])\n  },\n  \n  methods: {\n    ...mapActions('tasks', [\n      'fetchTasks',\n      'setPage',\n      'setFilters',\n      'cancelTask'\n    ]),\n    ...mapActions('templates', ['fetchTemplates']),\n    ...mapActions(['clearError']),\n    \n    // 格式化日期\n    formatDate(dateStr) {\n      return moment(dateStr).format('YYYY-MM-DD HH:mm:ss')\n    },\n    \n    // 获取状态文本\n    getStatusText(status) {\n      const statusMap = {\n        'waiting': '等待中',\n        'blocked': '被阻塞',\n        'running': '运行中',\n        'completed': '已完成',\n        'failed': '失败',\n        'canceled': '已取消'\n      }\n      return statusMap[status] || status\n    },\n    \n    // 获取优先级文本\n    getPriorityText(priority) {\n      const priorityMap = {\n        1: '最高',\n        2: '高',\n        3: '中',\n        4: '低',\n        5: '最低'\n      }\n      return priorityMap[priority] || priority\n    },\n    \n    // 查看任务详情\n    viewTaskDetail(taskId) {\n      this.$router.push(`/tasks/${taskId}`)\n    },\n    \n    // 确认取消任务\n    confirmCancel(task) {\n      this.selectedTask = task\n      this.$bvModal.show('cancel-modal')\n    },\n    \n    // 执行取消任务\n    async cancelTask() {\n      if (!this.selectedTask) return\n      \n      try {\n        await this.cancelTask(this.selectedTask.id)\n        this.$bvToast.toast('任务已成功取消', {\n          title: '操作成功',\n          variant: 'success',\n          solid: true\n        })\n      } catch (error) {\n        // 错误已经在action中处理\n      }\n    },\n    \n    // 更改页码\n    changePage(page) {\n      this.currentPage = page\n      this.setPage(page)\n    },\n    \n    // 应用筛选条件\n    applyFilters() {\n      this.setFilters({\n        status: this.filterStatus,\n        name: this.filterName,\n        template_type: this.filterTemplateType\n      })\n    },\n    \n    // 延迟搜索（防抖）\n    debounceSearch() {\n      clearTimeout(this.debounceTimer)\n      this.debounceTimer = setTimeout(() => {\n        this.applyFilters()\n      }, 500)\n    },\n    \n    // 清空筛选条件\n    clearFilters() {\n      this.filterStatus = ''\n      this.filterName = ''\n      this.filterTemplateType = ''\n      this.applyFilters()\n    },\n    \n    // 初始化模板类型选项\n    initTemplateTypeOptions() {\n      if (this.templateTypes && this.templateTypes.length > 0) {\n        // 从vuex中获取模板类型并创建选项\n        this.templateTypeOptions = [\n          { value: '', text: '全部类型' },\n          ...this.templateTypes.map(type => ({ value: type, text: type }))\n        ]\n      }\n    }\n  },\n  \n  async created() {\n    try {\n      // 获取模板列表以填充模板类型选项\n      await this.fetchTemplates()\n      this.initTemplateTypeOptions()\n      \n      // 获取任务列表\n      this.currentPage = this.pagination.page\n      await this.fetchTasks()\n    } catch (error) {\n      console.error('初始化任务列表失败:', error)\n    }\n  },\n  \n  watch: {\n    // 监听模板类型变化，更新下拉选项\n    templateTypes: {\n      handler: 'initTemplateTypeOptions',\n      immediate: true\n    }\n  }\n}\n</script>\n\n<style scoped>\n.card-body {\n  padding: 1.25rem;\n}\n\n.pagination {\n  margin-bottom: 0;\n}\n\n/* 状态标签样式已在App.vue中定义 */\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./TaskList.vue?vue&type=template&id=aca60c7e&scoped=true\"\nimport script from \"./TaskList.vue?vue&type=script&lang=js\"\nexport * from \"./TaskList.vue?vue&type=script&lang=js\"\nimport style0 from \"./TaskList.vue?vue&type=style&index=0&id=aca60c7e&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aca60c7e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}